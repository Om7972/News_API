<div class="home-page">
  <!-- Hero Section -->
  <% if (featuredArticle) { %>
  <section class="hero-section">
    <div class="hero-container">
      <div class="hero-content">
        <div class="hero-meta">
          <span class="hero-category">Featured</span>
          <span class="hero-source"><%= featuredArticle.source.name %></span>
        </div>
        <h1 class="hero-title"><%= featuredArticle.title %></h1>
        <p class="hero-description"><%= featuredArticle.description %></p>
        <div class="hero-actions">
          <a href="/article?url=<%= encodeURIComponent(featuredArticle.url) %>" class="btn btn-primary">
            Read Full Article
          </a>
          <button class="bookmark-btn" data-article='<%= JSON.stringify(featuredArticle) %>'>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z"/>
            </svg>
            Bookmark
          </button>
        </div>
      </div>
      <div class="hero-image">
        <img
          src="<%= featuredArticle.urlToImage || '/images/placeholder.jpg' %>"
          alt="<%= featuredArticle.title %>"
          loading="lazy"
        >
      </div>
    </div>
  </section>
  <% } %>

  <!-- Category Pills -->
  <section class="category-section">
    <div class="container">
      <div class="category-pills">
        <button class="category-pill <%= !currentCategory || currentCategory === 'general' ? 'active' : '' %>" data-category="general">
          üì∞ General
        </button>
        <button class="category-pill <%= currentCategory === 'business' ? 'active' : '' %>" data-category="business">
          üíº Business
        </button>
        <button class="category-pill <%= currentCategory === 'technology' ? 'active' : '' %>" data-category="technology">
          üíª Technology
        </button>
        <button class="category-pill <%= currentCategory === 'sports' ? 'active' : '' %>" data-category="sports">
          ‚öΩ Sports
        </button>
        <button class="category-pill <%= currentCategory === 'health' ? 'active' : '' %>" data-category="health">
          üè• Health
        </button>
        <button class="category-pill <%= currentCategory === 'science' ? 'active' : '' %>" data-category="science">
          üî¨ Science
        </button>
        <button class="category-pill <%= currentCategory === 'entertainment' ? 'active' : '' %>" data-category="entertainment">
          üé¨ Entertainment
        </button>
      </div>
    </div>
  </section>

  <!-- News Grid -->
  <section class="news-section">
    <div class="container">
      <div class="section-header">
        <h2>Latest News</h2>
        <div class="view-options">
          <button id="gridView" class="view-btn active">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="7" height="7"></rect>
              <rect x="14" y="3" width="7" height="7"></rect>
              <rect x="14" y="14" width="7" height="7"></rect>
              <rect x="3" y="14" width="7" height="7"></rect>
            </svg>
          </button>
          <button id="listView" class="view-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="8" y1="6" x2="21" y2="6"></line>
              <line x1="8" y1="12" x2="21" y2="12"></line>
              <line x1="8" y1="18" x2="21" y2="18"></line>
              <line x1="3" y1="6" x2="3.01" y2="6"></line>
              <line x1="3" y1="12" x2="3.01" y2="12"></line>
              <line x1="3" y1="18" x2="3.01" y2="18"></line>
            </svg>
          </button>
        </div>
      </div>

      <!-- Loading Skeleton -->
      <div id="loadingSkeleton" class="news-grid loading">
        <% for (let i = 0; i < 6; i++) { %>
        <div class="news-card skeleton">
          <div class="skeleton-image"></div>
          <div class="skeleton-content">
            <div class="skeleton-title"></div>
            <div class="skeleton-text"></div>
            <div class="skeleton-text short"></div>
          </div>
        </div>
        <% } %>
      </div>

      <!-- News Articles -->
      <div id="newsGrid" class="news-grid <%= articles && articles.length > 0 ? '' : 'hidden' %>">
        <% if (articles && articles.length > 0) { %>
          <% articles.forEach(article => { %>
          <article class="news-card">
            <div class="card-image">
              <img
                src="<%= article.urlToImage || '/images/placeholder.jpg' %>"
                alt="<%= article.title %>"
                loading="lazy"
                onerror="this.src='/images/placeholder.jpg'"
              >
              <div class="card-overlay">
                <button class="bookmark-btn card-bookmark" data-article='<%= JSON.stringify(article) %>'>
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z"/>
                  </svg>
                </button>
              </div>
            </div>
            <div class="card-content">
              <div class="card-meta">
                <span class="card-source"><%= article.source.name %></span>
                <span class="card-date"><%= new Date(article.publishedAt).toLocaleDateString() %></span>
              </div>
              <h3 class="card-title">
                <a href="/article?url=<%= encodeURIComponent(article.url) %>"><%= article.title %></a>
              </h3>
              <p class="card-description"><%= article.description || 'No description available.' %></p>
              <div class="card-actions">
                <a href="/article?url=<%= encodeURIComponent(article.url) %>" class="read-more-btn">
                  Read More
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="m9 18 6-6-6-6"/>
                  </svg>
                </a>
              </div>
            </div>
          </article>
          <% }); %>
        <% } %>
      </div>

      <!-- Load More Button -->
      <div class="load-more-container">
        <button id="loadMoreBtn" class="btn btn-secondary">
          <span class="btn-text">Load More</span>
          <div class="btn-loader"></div>
        </button>
      </div>
    </div>
  </section>
</div>

<script>
  // Page-specific variables
  window.currentCategory = '<%= currentCategory || 'general' %>';
  window.currentCountry = '<%= currentCountry || 'us' %>';
</script>